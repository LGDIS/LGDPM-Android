<div data-role="page" data-theme="b" id="evacuee-edit" data-title="LGDPM-Android">

  <div data-role="header" data-position="inline">
    <h1>避難者更新</h1>
    <a href="<%= Rho::RhoConfig.start_path %>" class="ui-btn-left" data-icon="home" data-direction="reverse">
      メニュー
    </a>
  </div>

  <div data-role="content">
    <form method="POST" action="<%= url_for :action => :update %>" id="evacuee-form" data-direction="reverse">
      <input type="hidden" name="id" value="<%= @evacuee.object %>"/>

      <div data-role="fieldcontain">
        <label for="evacuee-family_name" class="fieldLabel">姓</label>
        <input type="text" id="evacuee-family_name" name="evacuee[family_name]" value="<%= @evacuee.family_name %>" maxlength="500"/>
      </div>

      <div data-role="fieldcontain">
        <label for="evacuee-given_name" class="fieldLabel">名</label>
        <input type="text" id="evacuee-given_name" name="evacuee[given_name]" value="<%= @evacuee.given_name %>" maxlength="500" />
      </div>

      <div data-role="fieldcontain">
        <label for="evacuee-alternate_family_name" class="fieldLabel">姓（かな）</label>
        <input type="text" id="evacuee-alternate_family_name" name="evacuee[alternate_family_name]" value="<%= @evacuee.alternate_family_name %>" maxlength="500" />
      </div>

      <div data-role="fieldcontain">
        <label for="evacuee-alternate_given_name" class="fieldLabel">名（かな）</label>
        <input type="text" id="evacuee-alternate_given_name" name="evacuee[alternate_given_name]" value="<%= @evacuee.alternate_given_name %>" maxlength="500" />
      </div>

      <div data-role="fieldcontain">
        <fieldset data-role="controlgroup" class="ui-grid-a">
          <legend>生年月日</legend> 
          <div class="ui-block-a">
            <%= select_year_tag :name => "evacuee[date_of_birth_year]", :id => "evacuee-date_of_birth_year", :data_theme => "d", :value => @evacuee.date_of_birth_year %>
          </div>
          <div class="ui-block-b"><h3 style="width:40px; text-align:right;">年</h3></div>
          <div class="ui-block-a">
            <%= select_month_tag :name => "evacuee[date_of_birth_month]", :id => "evacuee-date_of_birth_month", :data_theme => "d", :value => @evacuee.date_of_birth_month %>
          </div>
          <div class="ui-block-b"><h3 style="width:40px; text-align:right;">月</h3></div>
          <div class="ui-block-a">
            <%= select_day_tag :name => "evacuee[date_of_birth_day]", :id => "evacuee-date_of_birth_day", :data_theme => "d", :value => @evacuee.date_of_birth_day %>
          </div>
          <div class="ui-block-b"><h3 style="width:40px; text-align:right;">日</h3></div>
        </fieldset>
      </div>

      <div data-role="fieldcontain"> 
        <fieldset data-role="controlgroup" data-type="horizontal"> 
          <legend>性別</legend> 
            <%= master_radios "sex", :data_theme => "d", :value => @evacuee.sex %>
        </fieldset> 
      </div> 

      <div data-role="fieldcontain">
        <label for="evacuee-home_postal_code" class="fieldLabel">郵便番号</label>
        <input type="text" id="evacuee-home_postal_code" name="evacuee[home_postal_code]" value="<%= @evacuee.home_postal_code %>" maxlength="500" />
      </div>

      <div data-role="fieldcontain">
        <label for="evacuee-home_state" class="select">都道府県</label>
        <select name="evacuee[home_state]" id="evacuee-home_state" data-theme="d"> 
          <%= state_options(@evacuee.home_state) %>
        </select> 
      </div>

      <div data-role="fieldcontain">
        <label for="evacuee-home_city" class="select">市区町村</label>
        <select name="evacuee[home_city]" id="evacuee-home_city" data-theme="d"> 
          <%= city_options(@evacuee.home_state, @evacuee.home_city) %>
        </select> 
      </div>

      <div data-role="fieldcontain">
        <label for="evacuee-home_street" class="select">町名</label>
        <select name="evacuee[home_street]" id="evacuee-home_street" data-theme="d"> 
          <%= street_options(@evacuee.home_state, @evacuee.home_city, @evacuee.home_street) %>
        </select> 
      </div>

      <div data-role="fieldcontain">
        <label for="evacuee-house_number" class="fieldLabel">番地</label>
        <input type="text" id="evacuee-house_number" name="evacuee[house_number]" value="<%= @evacuee.house_number %>" maxlength="500" />
      </div>

      <div data-role="fieldcontain">
        <label for="evacuee-shelter_name" class="select">避難所</label>
        <%= select_shelter_tag :name => "evacuee[shelter_name]", :id => "evacuee-shelter_name", :data_theme => "d", :value => @evacuee.shelter_name %>
      </div>

      <div data-role="fieldcontain">
        <label for="evacuee-refuge_status" class="fieldLabel">避難状況</label>
        <select name="evacuee[refuge_status]" id="evacuee-refuge_status" data-theme="d"> 
          <%= master_options("refuge_status", :value => @evacuee.refuge_status) %>
        </select> 
      </div>
  
      <div data-role="fieldcontain">
        <label for="evacuee-refuge_reason" class="fieldLabel">避難理由</label>
        <textarea id="evacuee-refuge_reason" name="evacuee[refuge_reason]" maxlength="4000" ><%= @evacuee.refuge_reason %></textarea>
      </div>

      <div data-role="fieldcontain">
        <fieldset data-role="controlgroup"> 
          <legend>家族</legend>
          <input type="checkbox" id="evacuee-family_well" name="evacuee[family_well]" class="custom" data-theme="d" value="1" <%= checked("1", @evacuee.family_well) %> />
          <input type="hidden" name="evacuee[family_well]" value="0" />
          <label for="evacuee-family_well">家族も無事</label>
        </fieldset>
      </div>
  
      <div data-role="fieldcontain">
        <fieldset data-role="controlgroup" class="ui-grid-a">
          <legend>入所年月日</legend> 
          <div class="ui-block-a">
            <%= select_year_tag :name => "evacuee[shelter_entry_date_year]", :id => "evacuee-shelter_entry_date_year", :data_theme => "d", :value => @evacuee.shelter_entry_date_year %>
          </div>
          <div class="ui-block-b"><h3 style="width:40px; text-align:right;">年</h3></div>
          <div class="ui-block-a">
            <%= select_month_tag :name => "evacuee[shelter_entry_date_month]", :id => "evacuee-shelter_entry_date_month", :data_theme => "d", :value => @evacuee.shelter_entry_date_month %>
          </div>
          <div class="ui-block-b"><h3 style="width:40px; text-align:right;">月</h3></div>
          <div class="ui-block-a">
            <%= select_day_tag :name => "evacuee[shelter_entry_date_day]", :id => "evacuee-shelter_entry_date_day", :data_theme => "d", :value => @evacuee.shelter_entry_date_day %>
          </div>
          <div class="ui-block-b"><h3 style="width:40px; text-align:right;">日</h3></div>
        </fieldset>
      </div>

      <div data-role="fieldcontain">
        <fieldset data-role="controlgroup" class="ui-grid-a">
          <legend>退所年月日</legend> 
          <div class="ui-block-a">
            <%= select_year_tag :name => "evacuee[shelter_leave_date_year]", :id => "evacuee-shelter_leave_date_year", :data_theme => "d", :value => @evacuee.shelter_leave_date_year %>
          </div>
          <div class="ui-block-b"><h3 style="width:40px; text-align:right;">年</h3></div>
          <div class="ui-block-a">
            <%= select_month_tag :name => "evacuee[shelter_leave_date_month]", :id => "evacuee-shelter_leave_date_month", :data_theme => "d", :value => @evacuee.shelter_leave_date_month %>
          </div>
          <div class="ui-block-b"><h3 style="width:40px; text-align:right;">月</h3></div>
          <div class="ui-block-a">
            <%= select_day_tag :name => "evacuee[shelter_leave_date_day]", :id => "evacuee-shelter_leave_date_day", :data_theme => "d", :value => @evacuee.shelter_leave_date_day %>
          </div>
          <div class="ui-block-b"><h3 style="width:40px; text-align:right;">日</h3></div>
        </fieldset>
      </div>

      <div data-role="fieldcontain">
        <label for="evacuee-next_place" class="fieldLabel">退所先</label>
        <input type="text" id="evacuee-next_place" name="evacuee[next_place]" value="<%= @evacuee.next_place %>" maxlength="100" />
      </div>

      <div data-role="fieldcontain">
        <label for="evacuee-next_place_phone" class="fieldLabel">退所先電話番号</label>
        <input type="text" id="evacuee-next_place_phone" name="evacuee[next_place_phone]" value="<%= @evacuee.next_place_phone %>" maxlength="20" />
      </div>

      <div data-role="fieldcontain">
        <label for="evacuee-injury_condition" class="fieldLabel">負傷内容</label>
        <textarea id="evacuee-injury_condition" name="evacuee[injury_condition]" maxlength="4000" ><%= @evacuee.injury_condition %></textarea>
      </div>

      <div data-role="fieldcontain">
        <label for="evacuee-allergy_cause" class="fieldLabel">アレルギー物質</label>
        <textarea id="evacuee-allergy_cause" name="evacuee[allergy_cause]" maxlength="4000" ><%= @evacuee.allergy_cause %></textarea>
      </div>

      <div data-role="fieldcontain"> 
        <label for="evacuee-pregnancy" class="select">妊婦</label>
        <select name="evacuee[pregnancy]" id="evacuee-pregnancy" data-theme="d"> 
          <%= master_options("pregnancy", :value => @evacuee.pregnancy) %>
        </select> 
      </div>

      <div data-role="fieldcontain"> 
        <label for="evacuee-baby" class="select">乳幼児</label>
        <select name="evacuee[baby]" id="evacuee-baby" data-theme="d"> 
          <%= master_options("baby", :value => @evacuee.baby) %>
        </select> 
      </div>

      <div data-role="fieldcontain">
        <label for="evacuee-upper_care_level_three" class="select">要介護度３以上</label>
        <select name="evacuee[upper_care_level_three]" id="evacuee-upper_care_level_three" data-theme="d"> 
          <%= master_options("upper_care_level_three", :value => @evacuee.upper_care_level_three) %>
        </select> 
      </div>

      <div data-role="fieldcontain">
        <label for="evacuee-elderly_alone" class="select">一人暮らし高齢者</label>
        <select name="evacuee[elderly_alone]" id="evacuee-elderly_alone" data-theme="d"> 
          <%= master_options("elderly_alone", :value => @evacuee.elderly_alone) %>
        </select> 
      </div>

      <div data-role="fieldcontain">
        <label for="evacuee-elderly_couple" class="select">高齢者世帯</label>
        <select name="evacuee[elderly_couple]" id="evacuee-elderly_couple" data-theme="d"> 
          <%= master_options("elderly_couple", :value => @evacuee.elderly_couple) %>
        </select> 
      </div>

      <div data-role="fieldcontain">
        <label for="evacuee-bedridden_elderly" class="select">寝たきり高齢者</label>
        <select name="evacuee[bedridden_elderly]" id="evacuee-bedridden_elderly" data-theme="d"> 
          <%= master_options("bedridden_elderly", :value => @evacuee.bedridden_elderly) %>
        </select> 
      </div>

      <div data-role="fieldcontain">
        <label for="evacuee-elderly_dementia" class="select">認知症高齢者</label>
        <select name="evacuee[elderly_dementia]" id="evacuee-elderly_dementia" data-theme="d"> 
          <%= master_options("elderly_dementia", :value => @evacuee.elderly_dementia) %>
        </select> 
      </div>

      <div data-role="fieldcontain">
        <label for="evacuee-rehabilitation_certificate" class="select">療育手帳所持者</label>
        <select name="evacuee[rehabilitation_certificate]" id="evacuee-rehabilitation_certificate" data-theme="d"> 
          <%= master_options("rehabilitation_certificate", :value => @evacuee.rehabilitation_certificate) %>
        </select> 
      </div>

      <div data-role="fieldcontain">
        <label for="evacuee-physical_disability_certificate" class="select">身体障害者手帳所持者</label>
        <select name="evacuee[physical_disability_certificate]" id="evacuee-physical_disability_certificate" data-theme="d"> 
          <%= master_options("physical_disability_certificate", :value => @evacuee.physical_disability_certificate) %>
        </select> 
      </div>

      <div data-role="fieldcontain">
        <fieldset data-role="controlgroup" data-type="horizontal">
          <legend>外部に公開</legend>
          <input type="radio" name="evacuee[public_flag]" id="evacuee-public_flag-1" value="1" data-theme="d" <%= checked("1", @evacuee.public_flag) %> /> 
          <label for="evacuee-public_flag-1">はい</label> 
          <input type="radio" name="evacuee[public_flag]" id="evacuee-public_flag-0" value="0" data-theme="d" <%= checked("0", @evacuee.public_flag) %> /> 
          <label for="evacuee-public_flag-0">いいえ</label> 
        </fieldset>
      </div>

      <div data-role="fieldcontain">
        <label for="evacuee-note" class="fieldLabel">備考</label>
        <textarea id="evacuee-note" name="evacuee[note]" maxlength="4000" ><%= @evacuee.note %></textarea>
      </div>

      <fieldset class="ui-grid-b">
        <div class="ui-block-a"><button type="button" data-theme="d" data-mini="true" onclick="cancel_data('<%= url_for :action => :do_search_again %>')">キャンセル</button></div>
        <div class="ui-block-b"><button type="button" data-theme="a" data-mini="true" onclick="save_data('<%= url_for :action => :update %>')">保　存</button></div>
        <div class="ui-block-c"><button type="button" data-theme="b" data-mini="true" onclick="delete_data('<%= url_for url_for :action => :delete, :id => @evacuee.object %>')">削　除</button></div>
      </fieldset>
    </form>
  </div>

</div>
